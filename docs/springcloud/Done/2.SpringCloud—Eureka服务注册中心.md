## Spring Cloud—Eureka服务注册中心

## 前言

> **服务治理是微服务架构中最为核心和基础的模块，它主要用来实现各个微服务实例的自动化注册和发现。**
>
> **而Spring Cloud Eureka主要负责的就是完成微服务架构中的服务治理功能**。

### 一、什么是服务注册

（1）在服务治理框架中，通常都会构建一个注册中心，每个服务单元向注册中心登记自己提供的服务，包括服务的主机与端口号、服务版本号、通讯协议等一些附加信息。

（2）注册中心按照服务名分类组织服务清单，同时还需要以心跳检测的方式去监测清单中的服务是否可用，若不可用需要从服务清单中剔除，以达到排除故障服务的效果。

### 二、什么是服务发现

（1）在**服务治理框架**下，服务间的调用**不再通过指定具体的实例地址来实现，而是通过服务名发起请求调用实现。**

（2）**服务调用方通过服务名从服务注册中心的服务清单中获取服务实例的列表清单**，通过指定的负载均衡策略取出一个服务实例位置来进行服务调用。

### 三、Eureka组件

> Eureka包含两个组件：
>
> - Eureka Server
> - Eureka Client。

#### 3.1 Eureka Server

（1）Eureka Server提供服务注册服务，各个节点启动后，会在Eureka Server中进行注册，这样Eureka Server中的服务注册表中将会存储所有可用服务节点的信息，服务节点的信息可以在界面中直观的看到。

（2）Eureka Server本身也是一个服务，默认情况下会自动注册到Eureka注册中心。

（3）Eureka Server通过Register、Get、Renew等接口提供服务的注册、发现和心跳检测等服务。

#### 3.2 Eureka Client

（1）介绍

Eureka Client是一个java客户端，用于简化与Eureka Server的交互，客户端同时也具备一个内置的、使用轮询(round-robin)负载算法的负载均衡器。

（2）作用

在应用启动后，Eureka Client将会向Eureka Server发送心跳,默认周期为30秒，如果Eureka Server在多个心跳周期内没有接收到某个节点的心跳，Eureka Server将会从服务注册表中把这个服务节点移除(默认90秒)。

（3）角色

> Eureka Client分为两个角色，分别是：**Service Provider**和**Service Consumer**

**Service Provider：**
服务生产方，将自身服务注册到Eureka中，从而使服务消费方能够找到

**Service Consumer：**
服务消费方，从Eureka中获取注册服务列表，从而找到消费服务

综上所述，Eureka主要就是分为三大角色：

**Eureka Server**：既是一个注册中心，同时也是一个服务，提供服务的注册与发现。

**Service Provider**：服务生产方，将自身服务注册到Eureka中，从而使服务消费方能够找到。

**Service Consumer**：服务消费方，从Eureka中获取注册服务列表，从而找到消费服务。

![image-20220811200241963](https://whcoding.oss-cn-hangzhou.aliyuncs.com/img/image-20220811200241963.png)







### 
