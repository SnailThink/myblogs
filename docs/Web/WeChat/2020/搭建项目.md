## æ­å»ºé¡¹ç›®ssm

### 1.ç®€ä»‹SSM

**SSMï¼ˆSpring+SpringMVC+MyBatisï¼‰** æ¡†æ¶é›†ç”±Springã€MyBatisä¸¤ä¸ªå¼€æºæ¡†æ¶æ•´åˆè€Œæˆï¼ˆSpringMVCæ˜¯Springä¸­çš„éƒ¨åˆ†å†…å®¹ï¼‰ã€‚å¸¸ä½œä¸ºæ•°æ®æºè¾ƒç®€å•çš„webé¡¹ç›®çš„æ¡†æ¶ã€‚ 

 **Spring**
ã€€ã€€Springå°±åƒæ˜¯æ•´ä¸ªé¡¹ç›®ä¸­è£…é…beançš„å¤§å·¥å‚ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æŒ‡å®šä½¿ç”¨ç‰¹å®šçš„å‚æ•°å»è°ƒç”¨å®ä½“ç±»çš„æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºé¡¹ç›®ä¸­çš„ç²˜åˆå‰‚ã€‚
ã€€ã€€Springçš„æ ¸å¿ƒæ€æƒ³æ˜¯IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼Œå³ä¸å†éœ€è¦ç¨‹åºå‘˜å»æ˜¾å¼åœ°`new`ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯è®©Springæ¡†æ¶å¸®ä½ æ¥å®Œæˆè¿™ä¸€åˆ‡ã€‚

**SpringMVC**
ã€€ã€€SpringMVCåœ¨é¡¹ç›®ä¸­æ‹¦æˆªç”¨æˆ·è¯·æ±‚ï¼Œå®ƒçš„æ ¸å¿ƒServletå³DispatcherServletæ‰¿æ‹…ä¸­ä»‹æˆ–æ˜¯å‰å°è¿™æ ·çš„èŒè´£ï¼Œå°†ç”¨æˆ·è¯·æ±‚é€šè¿‡HandlerMappingå»åŒ¹é…Controllerï¼ŒControllerå°±æ˜¯å…·ä½“å¯¹åº”è¯·æ±‚æ‰€æ‰§è¡Œçš„æ“ä½œã€‚SpringMVCç›¸å½“äºSSHæ¡†æ¶ä¸­strutsã€‚

**mybatis**
ã€€ã€€mybatisæ˜¯å¯¹jdbcçš„å°è£…ï¼Œå®ƒè®©æ•°æ®åº“åº•å±‚æ“ä½œå˜çš„é€æ˜ã€‚mybatisçš„æ“ä½œéƒ½æ˜¯å›´ç»•ä¸€ä¸ªsqlSessionFactoryå®ä¾‹å±•å¼€çš„ã€‚mybatisé€šè¿‡é…ç½®æ–‡ä»¶å…³è”åˆ°å„å®ä½“ç±»çš„Mapperæ–‡ä»¶ï¼ŒMapperæ–‡ä»¶ä¸­é…ç½®äº†æ¯ä¸ªç±»å¯¹æ•°æ®åº“æ‰€éœ€è¿›è¡Œçš„sqlè¯­å¥æ˜ å°„ã€‚åœ¨æ¯æ¬¡ä¸æ•°æ®åº“äº¤äº’æ—¶ï¼Œé€šè¿‡sqlSessionFactoryæ‹¿åˆ°ä¸€ä¸ªsqlSessionï¼Œå†æ‰§è¡Œsqlå‘½ä»¤ã€‚

 

### 2.æ­å»ºé¡¹ç›®

é…ç½®ç¯å¢ƒ-->å¯¼å…¥mybatis-->ç¼–å†™ä»£ç -->æµ‹è¯•

æ­å»ºssmé¡¹ç›®éœ€è¦

- mybatis
- mysql
- juit

#### 2.1 File-New-Project

![A1](https://pic.downk.cc/item/5f0d777414195aa594d6ddb8.png)



#### 2.2  ä½¿ç”¨spring initializr æ­å»ºé¡¹ç›®

 Spring initializr æ˜¯Spring å®˜æ–¹æä¾›çš„ä¸€ä¸ªç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªSpring boot é¡¹ç›®çš„å·¥å…·ã€‚ 

![A2](https://pic.downk.cc/item/5f0d777414195aa594d6ddbb.png)

#### 2.3.è®¾ç½®Project åç§°

![A3](https://pic.downk.cc/item/5f0d777414195aa594d6ddbd.png)

#### 2.4.é€‰æ‹©é¡¹ç›®ä¸­æ‰€éœ€è¦çš„ç»„ä»¶

![A4](https://pic.downk.cc/item/5f0d777414195aa594d6ddc0.png)

#### 2.5.ä¿å­˜é¡¹ç›®

![A5](https://pic.downk.cc/item/5f0d777414195aa594d6ddc2.png)

#### 2.6.æ£€æŸ¥ä¸‹mavenåœ°å€[File-Setting-Maven]

![A6](https://pic.downk.cc/item/5f0d77c914195aa594d6f6ff.png)



#### 2.7.æ„å»ºé¡¹ç›®æ ¼å¼

- common æ”¾ä¸€äº›å…¬ç”¨ç»„ä»¶
- controlleræ˜¯å‰ç«¯è®¿é—®ä½¿ç”¨
- dao (Mapper ç”¨äºå’ŒMybatisè¿›è¡Œäº¤è´§)
- pojo(å°±æ˜¯VO)
- service(ç”±Controllerè°ƒç”¨Serviceï¼ŒServiceImplï¼ŒMapperè¿›è¡Œæ‰§è¡Œæ•°æ®)
- mapper(mybatisè¯­å¥æ³¨æ„å­˜æ”¾çš„æ˜¯Xmlæ–‡ä»¶sqlè¯­å¥)

![A7](https://pic.downk.cc/item/5f0d77c914195aa594d6f701.png)

#### 2.8.é…ç½®application.yml

```yml
spring:
  profiles:

server:
  port: 8100
```



![A8](https://pic.downk.cc/item/5f0d77c914195aa594d6f703.png)

 Tomcat started on port(s): 8100  åˆ™å¯åŠ¨æˆåŠŸ

#### 2.9.é…ç½®æ•°æ®æº

è¿™é‡Œæˆ‘ä»¬å†™ä¸€ä¸ªé€šç”¨çš„æ‰«æé…ç½®æ•°æ®åº“

```java
@Configuration
public class DataSourceConfig {

	@Bean(name = "octMybatisDataSource")
	@Qualifier("octMybatisDataSource")
	@ConfigurationProperties(prefix = "spring.datasource")
	public DataSource octMybatisDataSource() {
		DruidDataSource dataSource = new DruidDataSource();
		return dataSource;
	}
}
```

#### 2.10.é…ç½®mybatisæ‰«æè·¯å¾„

```java
/**
 * Mybatisé…ç½®ï¼Œåªè¯»
 */
@Configuration
@EnableTransactionManagement
@MapperScan(basePackages = {"com.groot.springbootmybatis.dao.mapper","com.groot.springbootmybatis.dao.mapper"})
public class MiddleMybatisConfig {

    @Bean(name = "middleMybatisSqlSessionFactory")
    public SqlSessionFactory testSqlSessionFactory(@Qualifier("octMybatisDataSource") DataSource dataSource) throws Exception {
        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();
        bean.setDataSource(dataSource);
        PathMatchingResourcePatternResolver pathMatchingResourcePatternResolver = new PathMatchingResourcePatternResolver();
        String packageSearchPath = ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX + "/mapper/*.xml";
        bean.setMapperLocations(pathMatchingResourcePatternResolver.getResources(packageSearchPath));
        return bean.getObject();
    }

    @Bean(name = "middleMybatisSqlSessionTemplate")
    public SqlSessionTemplate testSqlSessionTemplate(@Qualifier("middleMybatisSqlSessionFactory") SqlSessionFactory sqlSessionFactory) throws Exception {
        return new SqlSessionTemplate(sqlSessionFactory);
    }
}
```

#### 2.11.åœ¨applicationæ–‡ä»¶ä¸­å¢åŠ æ•°æ®åº“é…ç½®

```yml
spring:
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/oct?useUnicode=true&characterEncoding=UTF-8&serverTimezone=GMT%2B8
    username: root
    password: 1q2w3e
    driver-class-name: com.mysql.cj.jdbc.Driver
    initialSize: 10
    minIdle: 10
    maxActive: 30
    timeBetweenEvictionRunsMillis: 60000
    validationQuery: SELECT 1
    testWhileIdle: true
    testOnBorrow: false
    testOnReturn: false
```

#### 2.12.åˆ›å»ºVO

```java
public class ExampleDemoVO {

	@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd", timezone = "GMT+8")
	private Date bTime;
	@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd", timezone = "GMT+8")
	private Date eTime;


	@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd ", timezone = "GMT+8")
	private Date createTime;
	@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd ", timezone = "GMT+8")
	private Date updateTime;
	private Integer createUser;
	private Integer updateUser;
	private Integer valid;
	private Date rVersion;
	private String deliveryNo;
	private Integer bookingId;
	private Integer taskId;

	/**
	 * é¡µé¢æ”¶è´§æ–¹ç¼–ç 
	 * */
	private List<String> receiveNos;

	public List<String> getReceiveNos() {
		return receiveNos;
	}

	public void setReceiveNos(List<String> receiveNos) {
		this.receiveNos = receiveNos;
	}

	public Date getCreateTime() {
		return createTime;
	}

	public void setCreateTime(Date createTime) {
		this.createTime = createTime;
	}

	public Date getUpdateTime() {
		return updateTime;
	}

	public void setUpdateTime(Date updateTime) {
		this.updateTime = updateTime;
	}

	public Integer getCreateUser() {
		return createUser;
	}

	public void setCreateUser(Integer createUser) {
		this.createUser = createUser;
	}

	public Integer getUpdateUser() {
		return updateUser;
	}

	public void setUpdateUser(Integer updateUser) {
		this.updateUser = updateUser;
	}

	public Integer getValid() {
		return valid;
	}

	public void setValid(Integer valid) {
		this.valid = valid;
	}

	public Date getrVersion() {
		return rVersion;
	}

	public void setrVersion(Date rVersion) {
		this.rVersion = rVersion;
	}

	public String getDeliveryNo() {
		return deliveryNo;
	}

	public void setDeliveryNo(String deliveryNo) {
		this.deliveryNo = deliveryNo;
	}

	public Integer getBookingId() {
		return bookingId;
	}

	public void setBookingId(Integer bookingId) {
		this.bookingId = bookingId;
	}

	public Integer getTaskId() {
		return taskId;
	}

	public void setTaskId(Integer taskId) {
		this.taskId = taskId;
	}
}

```

#### 2.13.åˆ›å»ºservice

```java
public interface ExampleDemoService {
	List<ExampleDemoVO> getExampleList();
}
```

#### 2.14.åˆ›å»ºserviceImpl

 åœ¨æ¥å£çš„å®ç°ç±»ä¸­éœ€è¦å¢åŠ æ³¨è§£`@Service`

```java
@Service
public class ExampleDemoServiceImpl implements ExampleDemoService {

	@Autowired
	ExampleMapper exampleMapper;

	@Override
	public List<ExampleDemoVO> getExampleList() {
		List<ExampleDemoVO> list= exampleMapper.findExampleList();
		return list;
	}
}

```

#### 2.15.åˆ›å»ºMapper

```java
@Mapper
public interface ExampleMapper {
	List<ExampleDemoVO> findExampleList();
}

```

#### 2.16.åˆ›å»ºcontroler

```java
@RestController
@RequestMapping(value = {"/springboot"})
public class MybatisController {

	@Autowired
	ExampleDemoService service;
	@GetMapping("/mybatis")
	public void hello() {
	List<ExampleDemoVO> list= service.getExampleList();
		System.out.println("è·å–åˆ°çš„æ•°æ®ä¸º:"+list.size());
	}
}

```

#### 2.17.è®¿é—®åœ°å€å¦‚ä¸‹

[è®¿é—®åœ°å€]( http://localhost:8100/springboot/mybatis) 

#### 2.18.å°†ä»£ç æ‰“åŒ…

ç”±äºé›†æˆäº†mavenæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨mavenæ‰“æˆjaråŒ…

#### ![A9](https://pic.downk.cc/item/5f0d77c914195aa594d6f705.png)

#### 2.19.è¿è¡ŒJaråŒ…

ä¸Šä¸€æ­¥å·²ç»å¯ä»¥çœ‹åˆ°æ–‡ä»¶è·¯å¾„

å†è¯¥è·¯å¾„æ‰§è¡Œcmd ç„¶å **java -jar spring-boot-mybatis-0.0.1-SNAPSHOT.jar ** 

![A10](https://pic.downk.cc/item/5f0d77c914195aa594d6f707.png)

#### 2.20.å°†é¡¹ç›®ä¸Šä¼ åˆ°gitee

**20.1 ä¿®æ”¹.gitignoreæ–‡ä»¶**

```git
/target/
!.mvn/wrapper/maven-wrapper.jar

### STS ###
.apt_generated
.classpath
.factorypath
.project
.settings
.springBeans
.sts4-cache


### IntelliJ IDEA ###
.idea
.idea/
/.idea/
.mvn
*.iws
*.iml
*.ipr
mvnw.cmd
mvnw
/.mvn


### NetBeans ###
/nbproject/private/
/build/
/nbbuild/
/dist/
/nbdist/
/.nb-gradle/
/.idea
/.git
```



**20.2 åˆå§‹åŒ–æ–‡ä»¶**

```linux
$ git add . #å°†å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°gitæš‚å­˜åŒº
$ git commit -m "my first commit" #æäº¤å¹¶å¤‡æ³¨æäº¤ä¿¡æ¯
$ git remote add origin https://gitee.com/ç”¨æˆ·ä¸ªæ€§åœ°å€/HelloGitee.git
$ git push origin master #å°†æœ¬åœ°æäº¤æ¨é€åˆ°è¿œç¨‹ä»“åº“
```

**20.2 é¡¹ç›®åœ°å€**

**https://gitee.com/VincentBlog/spring-boot-mybatis.git**



### 3.é—®é¢˜æ€»ç»“

**1.The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary**

```java
Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
```

é—®é¢˜åŸå› ï¼š 
    å‡çº§åçš„mysqlé©±åŠ¨ç±»ï¼ŒDriverä½ç½®ç”±com.mysql.jdbc.Driver å˜ä¸ºcom.mysql.cj.jdbc.Driver 
è§£å†³æ–¹æ¡ˆï¼š 
    å°†æ•°æ®é…ç½®æ–‡ä»¶é‡Œspring.datasource.driver-class-name=com.mysql.jdbc.Driverä¿®æ”¹ä¸ºå¦‚ä¸‹
    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver



**2.Invalid bound statement (not found): com.groot.springbootmybatis.dao.mapper.ExampleMapper.findExampleList**

2.1 æ‰¾ä¸åˆ°mapperçš„è·¯å¾„ï¼Œæ£€æŸ¥mapperçš„è·¯å¾„å’Œæ˜¯å¦æœ‰é—®é¢˜

```xml
<mapper namespace="com.groot.springbootmybatis.dao.mapper.ExampleMapper">
</mapper>
```

**3.è§£å†³ideaæ–°å»ºmavené¡¹ç›®æ—¶ä¸€ç›´loadingé—®é¢˜** 

â€‹    æ‰“å¼€ï¼šSetting---->Build Tools â†’ Maven â†’ Importing, 

  set VM options for importer to **-Xmx1024m  ä¸­æ•°å­—æ”¹æˆ1024**



## å…³æ³¨

>å¦‚æœä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©è¯ï¼Œæ¬¢è¿ç‚¹èµğŸ‘ å…³æ³¨â¤ï¸ åˆ†äº«ğŸ‘¥ï¼
>
>å¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·æ‰¹è¯„æŒ‡æ•™ï¼Œä¸èƒœæ„Ÿæ¿€ï¼
>
>ç‚¹ä¸ªåœ¨çœ‹ï¼Œåˆ†äº«åˆ°æœ‹å‹åœˆï¼Œå¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼ï¼ï¼


![snailThink.png](http://ww1.sinaimg.cn/large/006aMktPgy1gdegzjxv6yj30go0gogmi.jpg)

