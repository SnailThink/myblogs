### æ•°æ®åº“è¡¨ç»“æ„æ–‡æ¡£ç”Ÿæˆå·¥å…·

æˆ‘ä»¬ç»å¸¸ä¼šæœ‰ç¼–å†™æ•°æ®åº“è¡¨ç»“æ„æ–‡æ¡£çš„æ—¶é—´ä»˜å‡ºï¼Œå…³äºæ•°æ®åº“è¡¨ç»“æ„æ–‡æ¡£çŠ¶æ€ï¼š

è¦ä¹ˆæ²¡æœ‰ã€è¦ä¹ˆæœ‰ã€ä½†éƒ½æ˜¯æ‰‹å†™ã€åæœŸè¿ç»´å¼€å‘ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œç»´æŠ¤åˆ°æ–‡æ¡£ä¸­ï¼Œå¾ˆæ˜¯ç¹çã€

å¦‚æœå¿˜è®°ä¸€æ¬¡ç»´æŠ¤ã€å°±ä¼šç»™ä»¥åå·¥ä½œé€ æˆå¾ˆå¤šå›°æ‰°ã€‚

æ¨èä¸€æ¬¾æ’ä»¶ç”¨æ¥ç”Ÿæˆæ•°æ®åº“æ–‡æ¡£ã€‚

[screwæ’ä»¶](https://gitee.com/leshalv/screw )

####  screwç‰¹ç‚¹

- ç®€æ´ã€è½»é‡ã€è®¾è®¡è‰¯å¥½
- å¤šæ•°æ®åº“æ”¯æŒ
- å¤šç§æ ¼å¼æ–‡æ¡£
- çµæ´»æ‰©å±•
- æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿

#### æ•°æ®åº“æ”¯æŒ

-  MySQL
-  MariaDB
-  TIDB
-  Oracle
-  SqlServer
-  PostgreSQL
-  Cache DB

#### æ–‡æ¡£ç”Ÿæˆæ”¯æŒ

-  html
-  word
-  markdwon

####  æ–‡æ¡£æˆªå›¾

![](https://pic.downk.cc/item/5f23d3a714195aa594901762.png)

### SpringBootæ•´åˆscrewç”Ÿæˆæ•°æ®åº“æ–‡æ¡£

#### æ–¹æ³•ä¸€ï¼šä»£ç ç”Ÿæˆ

**1.1 æ·»åŠ ä¾èµ–**

æ·»åŠ screwéœ€è¦çš„ä¾èµ–ï¼Œæ£€æŸ¥æ˜¯å¦æœ€æ–°ç‰ˆæœ¬ï¼Œé“¾æ¥åœ°å€->[æœ€æ–°ç‰ˆæœ¬](https://mvnrepository.com/artifact/cn.smallbun.screw/screw-core) 

```xml
<!--freemarkeræ¨¡ç‰ˆ-->
<dependency>
    <groupId>org.freemarker</groupId>
    <artifactId>freemarker</artifactId>
    <version>2.3.30</version>
</dependency>
 
<!--screwä¾èµ–-->
<dependency>
    <groupId>cn.smallbun.screw</groupId>
    <artifactId>screw-core</artifactId>
    <version>1.0.2</version>
</dependency>

<!--mysql -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <scope>runtime</scope>
</dependency>

```

**1.2 æµ‹è¯•ç±»ä»£ç **

```java
package com.groot.screw;
import cn.smallbun.screw.core.Configuration;
import cn.smallbun.screw.core.engine.EngineConfig;
import cn.smallbun.screw.core.engine.EngineFileType;
import cn.smallbun.screw.core.engine.EngineTemplateType;
import cn.smallbun.screw.core.execute.DocumentationExecute;
import cn.smallbun.screw.core.process.ProcessConfig;
import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;
import org.junit.Test;
import org.springframework.boot.test.context.SpringBootTest;

import javax.sql.DataSource;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;


@SpringBootTest
public class ScrewApplicationTests {

	@Test
	public void contextLoads() {
		//æ•°æ®æºï¼šHikariCP çº¿ç¨‹æ± , SpringBoot 2.0å¼€å§‹å†…ç½®äº†HikariCPï¼Œ2.0ä¹‹å‰çš„ç‰ˆæœ¬éœ€è¦å¼•å…¥ä¾èµ–
		HikariConfig hikariConfig = new HikariConfig();
		// com.mysql.jdbc.Driver MySQL5é©±åŠ¨ï¼›com.mysql.cj.jdbc.Driver MySQL6ä¹‹åçš„é©±åŠ¨
		hikariConfig.setDriverClassName("com.mysql.jdbc.Driver");
		hikariConfig.setJdbcUrl("jdbc:mysql://127.0.0.1:3306/oct?useUnicode=true&characterEncoding=UTF-8&serverTimezone=GMT%2B8");
		hikariConfig.setUsername("root");
		hikariConfig.setPassword("1q2w3e");
		//è®¾ç½®å¯ä»¥è·å–tables remarksä¿¡æ¯
		hikariConfig.addDataSourceProperty("useInformationSchema", "true");
		hikariConfig.setMinimumIdle(2);
		hikariConfig.setMaximumPoolSize(5);
		DataSource dataSource = new HikariDataSource(hikariConfig);

		// 1ã€ç”Ÿæˆæ–‡ä»¶é…ç½®
		EngineConfig engineConfig = EngineConfig.builder()
				//ç”Ÿæˆæ–‡ä»¶è·¯å¾„(æ”¹æˆè‡ªå·±çš„ç”Ÿæˆè·¯å¾„)
				.fileOutputDir("/Users/Manager/Desktop")
				//ç”Ÿæˆåæ˜¯å¦ç«‹å³æ‰“å¼€ç›®å½•
				.openOutputDir(true)
				//æ–‡ä»¶ç±»å‹ æœ‰HTMLã€WORDã€MDä¸‰ç§æšä¸¾é€‰æ‹©
				.fileType(EngineFileType.WORD)
				//ç”Ÿæˆæ¨¡æ¿å®ç°
				.produceType(EngineTemplateType.freemarker).build();

		// å¿½ç•¥è¡¨åï¼ˆå¯é€‰ï¼‰
		List<String> ignoreTableName = Arrays.asList("aa", "test_group");
		// å¿½ç•¥è¡¨å‰ç¼€ï¼ˆå¯é€‰ï¼‰
		List<String> ignorePrefix = Collections.singletonList("czb_");
		// å¿½ç•¥è¡¨åç¼€ï¼ˆå¯é€‰ï¼‰
		List<String> ignoreSuffix = Arrays.asList("_test", "_test1");

		// 2ã€é…ç½®æƒ³è¦å¿½ç•¥çš„è¡¨ï¼ˆå¯é€‰ï¼‰
		ProcessConfig processConfig = ProcessConfig.builder()
				.ignoreTableName(ignoreTableName)
				.ignoreTablePrefix(ignorePrefix)
				.ignoreTableSuffix(ignoreSuffix)
				.build();

		// 3ã€ç”Ÿæˆæ–‡æ¡£é…ç½®ï¼ˆåŒ…å«ä»¥ä¸‹è‡ªå®šä¹‰ç‰ˆæœ¬å·ã€æ ‡é¢˜ã€æè¿°ï¼ˆæ•°æ®åº“å + æè¿° = æ–‡ä»¶åï¼‰ç­‰é…ç½®è¿æ¥ï¼‰
		Configuration config = Configuration.builder()
				.version("1.0.0")
				.title("æ•°æ®åº“æ–‡æ¡£")
				.description("æ•°æ®åº“è®¾è®¡æ–‡æ¡£ç”Ÿæˆ")
				.dataSource(dataSource)
				.engineConfig(engineConfig)
				.produceConfig(processConfig).build();

		// 4ã€æ‰§è¡Œç”Ÿæˆ
		new DocumentationExecute(config).execute();
	}
}
```

#### æ–¹æ³•äºŒï¼šé€šè¿‡æ’ä»¶çš„å½¢å¼ç”Ÿæˆæ–‡æ¡£

 åœ¨pom.xmlæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½® 

```xml
<build>
    <plugins>
        <plugin>
            <groupId>cn.smallbun.screw</groupId>
            <artifactId>screw-maven-plugin</artifactId>
            <version>1.0.2</version>
            <dependencies>
                <!-- HikariCP -->
                <dependency>
                    <groupId>com.zaxxer</groupId>
                    <artifactId>HikariCP</artifactId>
                    <version>3.4.5</version>
                </dependency>
                <!--mysql driver-->
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.48</version>
                </dependency>
            </dependencies>
            <configuration>
                <!--username-->
                <username>æ•°æ®åº“å¸å·</username>
                <!--password-->
                <password>æ•°æ®åº“å¯†ç </password>
                <!--driver  com.mysql.jdbc.Driver MySQL5é©±åŠ¨ï¼›com.mysql.cj.jdbc.Driver MySQL6ä¹‹åçš„é©±åŠ¨-->
                <driverClassName>com.mysql.jdbc.Driver</driverClassName>
                <!--jdbc url-->
                <jdbcUrl>jdbc:mysql://127.0.0.1:3306/æ•°æ®åº“å</jdbcUrl>
                <!--ç”Ÿæˆæ–‡ä»¶ç±»å‹ HTMLã€WORDã€MDä¸‰ç§é€‰æ‹©-->
                <fileType>HTML</fileType>
                <!--æ–‡ä»¶è¾“å‡ºç›®å½•-->
                <fileOutputDir>E:</fileOutputDir>
                <!--æ‰“å¼€æ–‡ä»¶è¾“å‡ºç›®å½•-->
                <openOutputDir>true</openOutputDir>
                <!--ç”Ÿæˆæ¨¡æ¿-->
                <produceType>freemarker</produceType>
                <!--æè¿°-->
                <description>æ•°æ®åº“æ–‡æ¡£ç”Ÿæˆ</description>
                <!--ç‰ˆæœ¬-->
                <version>1.0.0</version>
                <!--æ ‡é¢˜-->
                <title>æ•°æ®åº“æ–‡æ¡£</title>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>

```

 ä¹‹åè¿è¡Œmavenæ’ä»¶ç”Ÿæˆå³å¯ 

![](https://pic.downk.cc/item/5f23d3a714195aa594901760.png)

> screw ç äº‘åœ°å€ï¼šhttps://gitee.com/leshalv/screw 



> screwdemoç äº‘åœ°å€:https://gitee.com/VincentBlog/Groot.git

ä¸‹å›¾ä¸ºæˆ‘ä¸Šä¼ åˆ°ç äº‘çš„é¡¹ç›®ï¼šè‹¥ä¸æƒ³æ–°å»ºé¡¹ç›®å¯ä»¥ä»ç äº‘ä¸Šè·å–åˆ°æˆ‘çš„é¡¹ç›®ï¼Œç„¶åä¿®æ”¹æ•°æ®åº“è´¦å·å’Œå¯†ç å³å¯



![](https://pic.downk.cc/item/5f23d3a714195aa594901765.png)



### å…³æ³¨

>å¦‚æœä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©è¯ï¼Œæ¬¢è¿ç‚¹èµğŸ‘ å…³æ³¨â¤ï¸ åˆ†äº«ğŸ‘¥ï¼
>
>å¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·æ‰¹è¯„æŒ‡æ•™ï¼Œä¸èƒœæ„Ÿæ¿€ï¼
>
>ç‚¹ä¸ªåœ¨çœ‹ï¼Œåˆ†äº«åˆ°æœ‹å‹åœˆï¼Œå¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼ï¼ï¼


![å…¬ä¼—å·](https://whcoding.oss-cn-hangzhou.aliyuncs.com/img/20220507200900.jpg)